<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <title>Cadastro de Itens</title>
</head>

<body>
    <!--
    Cadastrar Item
    - lote
    - produto/material/artigo
    - quantidade
    - motivo da devolução
    - data da devolução
    - foto do item
    -->
    <div class="div-main">
        <div class="div-mother">
            <a draggable="false" href="index.html"><button><img src="reply_24dp_E3E3E3_FILL0_wght400_GRAD0_opsz24.svg"
                        draggable="false" id="backIcon"></button></a>
            <form id="itemForm">
                <label for="cadLote"><b>Lote</b></label>
                <input type="number" placeholder="Ex.: 2000123456" class="geral-input" id="cadLote" required>
                <label for="cadMaterial"><b>Material</b></label>
                <input type="number" placeholder="Ex.: 12345678001" class="geral-input" id="cadMaterial" required>
                <label for="cadNF"><b>Nota Fiscal</b></label>
                <input type="text" placeholder="Ex.: 000123456-5" class="geral-input" id="cadNF" required>
                <label for="cadQuant"><b>Quantidade</b></label>
                <input type="number" placeholder="Ex.: 20" class="geral-input" id="cadQuant" required>
                <label for="cadMotivoDevo"><b>Motivo da devolução</b></label>
                <input type="text" placeholder="Ex.: Faltando Transfer" class="geral-input" id="cadMotivoDevo" required>
                <label for="cadDataDevo"><b>Data da devolução</b></label>
                <input type="date" class="geral-input" id="cadDataDevo" required>
                <label for="cadImg"><b>Foto do item</b></label>
                <input type="file" accept="image/*" class="geral-input" id="cadImg" required>
                <button type="submit" class="action-button" id="cadastroItem">Cadastrar</button>
            </form>
            <div class="custom-alert" id="customAlert">
                <p>Item salvo com sucesso!</p>
                <button onclick="hideAlert()">Fechar</button>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function (){
            $('#cadLote').mask('0000000000');
            $('#cadMaterial').mask('00000000000');
            $('#cadNF').mask('000000000-0')
            $('#cadMotivoDevo').mask('A', {
                translation: {
                    'A': { recursive: true }
                }
            });
        });

        document.getElementById('itemForm').addEventListener('submit', function (e) {
            e.preventDefault();

            const lote = document.getElementById('cadLote').value.trim();
            const material = document.getElementById('cadMaterial').value.trim();
            const nf = document.getElementById('cadNF').value.trim();
            const quantidade = document.getElementById('cadQuant').value.trim();
            const motivo = document.getElementById('cadMotivoDevo').value.trim();
            const data = document.getElementById('cadDataDevo').value.trim();
            const foto = document.getElementById('cadImg').value.trim();

            let items = JSON.parse(localStorage.getItem('items')) || [];
            items.push({lote, material, nf, quantidade, motivo, data, foto});
            localStorage.setItem('items', JSON.stringify(items));
            showAlert();
            this.reset();
        });

        function showAlert(){
            document.getElementById('customAlert').classList.add('show');
        }

        function hideAlert(){
            document.getElementById('customAlert').classList.remove('show');
        }
    </script>
</body>

</html>